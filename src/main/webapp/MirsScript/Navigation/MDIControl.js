!function(t,u){window.Mirs=window.Mirs||{};window.Mirs.Navigation=window.Mirs.Navigation||{};if(window.Mirs.Navigation.MDIControl){throw new Error("Mirs.Navigation.MDIControl 类重复加载")}var b=window.Mirs.Navigation.MDIControl=function(){this._masterElement=null;this._isLayout=false;this._childWindowElement=null;this._activeMdiChild=null;this._eventAddList=new Array();this._eventRemoveList=new Array();this._addActiveEventList=new Array();this._removeActiveEventList=new Array();this._mdiLayout={Tile:"T",TileVertical:"V",TileHorizontal:"H"}};var v=null;b.getInstance=function(){var a=null;if(v==null){a=new window.Mirs.Navigation.MDIControl();v=a}else{a=v}return a};b.Create=function(){var y=t.ce("div");y.setAttribute("MirsElementType","Navigation.MDIControl");var g=new Mirs.Navigation.MDIControl();g._masterElement=y;y.setClassName=t.cd(g,g.setClassName);y.setID=t.cd(g,g.setID);y.setIsLayout=t.cd(g,g.setIsLayout);y.getIsLayout=t.cd(g,g.getIsLayout);y.createChildWindow=t.cd(g,g.createChildWindow);y.setActiveMdiChild=t.cd(g,g.setActiveMdiChild);y.getActiveMdiChild=t.cd(g,g.getActiveMdiChild);var a=window.Mirs.Navigation.MDILayoutControl.Create();var x=Mirs.Navigation.RootNav.getInstance();x.appendChild(a);y.addControlAddEvent=t.cd(g,g.addControlAddEvent);y.addControlRemoveEvent=t.cd(g,g.addControlRemoveEvent);y.removeControlAddEvent=t.cd(g,g.removeControlAddEvent);y.removeControlRemoveEvent=t.cd(g,g.removeControlRemoveEvent);y.getEventAddList=t.cd(g,g.getEventAddList);y.getEventRemoveList=t.cd(g,g.getEventRemoveList);y.setLayoutMdi=t.cd(g,g.setLayoutMdi);y.getLayoutMdi=t.cd(g,g.getLayoutMdi);y.getMdiChildren=t.cd(g,g.getMdiChildren);y.childrenClear=t.cd(g,g.childrenClear);y.runActiveMdiChildEvent=t.cd(g,g.runActiveMdiChildEvent);y.addActiveMdiChildEvent=t.cd(g,g.addActiveMdiChildEvent);y.removeActiveMdiChildEvent=t.cd(g,g.removeActiveMdiChildEvent);y.MdiLayout=g._mdiLayout;v=y;return y};b.prototype.childrenClear=function(){var x=window.Mirs.Navigation.MdiList.getInstance();var y=x.getMdiList();for(var g=0;g<y.length;g++){var a=y[g];a.closeing()}x._mdiList=new Array();return x.getMdiList()};b.prototype.getMdiChildren=function(){var a=window.Mirs.Navigation.MdiList.getInstance();return a.getMdiList()};b.prototype.setLayoutMdi=function(B){var z=window.Mirs.Navigation.LayoutContainer.getInstance();var x=B;switch(x){case"T":z.setLayoutTile();z.setStatus("T");break;case"H":z.setLayoutHorizontal();z.setStatus("H");break;case"V":z.setLayoutVertical();z.setStatus("V");break;case"S":var y=window.Mirs.Navigation.MdiList.getInstance();for(var g=0;g<y.getMdiList().length;g++){var a=y.getMdiList()[g];if(g==0){a.className="rwIframeContainerShow";a.setAttribute("style","")}else{a.style.display="none"}a.getTitleContainer().className="rwIfTitleContainerNone";a.getIfContainer().className="rwIfContainer rwIfContainerTop0"}z.setStatus("S");break}var A=window.Mirs.Navigation.MDIControl.getInstance();A.setIsLayout(true)};b.prototype.getLayoutMdi=function(){var a=window.Mirs.Navigation.LayoutContainer.getInstance();return a.getStatus()};b.prototype.addControlAddEvent=function(a){this._eventAddList.push(a)};b.prototype.addControlRemoveEvent=function(y){var x=new Array();for(var g=0;g<this._eventAddList.length;g++){var a=this._eventAddList[g];if(a==y){}else{x.push(a)}}this._eventAddList=x;return x};b.prototype.removeControlAddEvent=function(a){this._eventRemoveList.push(a)};b.prototype.removeControlRemoveEvent=function(y){var x=new Array();for(var g=0;g<this._eventRemoveList.length;g++){var a=this._eventRemoveList[g];if(a==y){}else{x.push(a)}}this._eventRemoveList=x;return x};b.prototype.getEventAddList=function(){return this._eventAddList};b.prototype.getEventRemoveList=function(){return this._eventRemoveList};b.prototype.setActiveMdiChild=function(a){this._activeMdiChild=a;this.runActiveMdiChildEvent(this._activeMdiChild)};b.prototype.getActiveMdiChild=function(){return this._activeMdiChild};b.prototype.runActiveMdiChildEvent=function(a){for(var x=0;x<this._addActiveEventList.length;x++){var g=this._addActiveEventList[x];g(a)}};b.prototype.addActiveMdiChildEvent=function(a){this._addActiveEventList.push(a)};b.prototype.removeActiveMdiChildEvent=function(a){};b.prototype.setClassName=function(a){this._masterElement.className=a};b.prototype.setID=function(a){this._masterElement.id=a};b.prototype.setIsLayout=function(a){this._isLayout=a;return this._isLayout};b.prototype.getIsLayout=function(a){return this._isLayout};b.prototype.getMdiChildren=function(){var a=window.Mirs.Navigation.MdiList.getInstance();return a.getMdiList()};b.prototype.createChildWindow=function(A){var g=window.Mirs.Navigation.ChildWindow.CreateChildWindow();g.getModel()._Code=A==null?"":A.toLowerCase();var x=new window.Mirs.Navigation.ChildWindow();x._masterElement=g;var a=this.getEventAddList();for(var y=0;y<a.length;y++){var z=a[y];z()}return g};b.getMdiControl=function(){return _mdiElement};var j=window.Mirs.Navigation.LayoutContainer=function(){this._masterElement=null;this._status=null};var k=null;j.getInstance=function(){var a=null;if(k==null){a=new window.Mirs.Navigation.LayoutContainer();k=a}else{a=k}return a};j.Create=function(){var x=t.ce("div");x.setAttribute("MirsElementType","Navigation.LayoutContainer");var g=new Mirs.Navigation.LayoutContainer();g._masterElement=x;var a=t.cd(g,g.layout_Click);t.ah(x,"click",a);x.setClassName=t.cd(g,g.setClassName);x.setID=t.cd(g,g.setID);x.setLayoutTile=t.cd(g,g.setLayoutTile);x.setLayoutHorizontal=t.cd(g,g.setLayoutHorizontal);x.setLayoutVertical=t.cd(g,g.setLayoutVertical);x.setStatus=t.cd(g,g.setStatus);x.getStatus=t.cd(g,g.getStatus);k=x;return x};j.prototype.setClassName=function(a){this._masterElement.className=a};j.prototype.setID=function(a){this._masterElement.id=a};j.prototype.layout_Click=function(g){var a=window.Mirs.Navigation.MDILayoutControl.getInstance();a.changeShow()};j.prototype.setStatus=function(a){this._status=a;return this._status};j.prototype.getStatus=function(a){return this._status};var c=240;var q=200;var s=8;var l=8;var f="";j.prototype.setLayoutTile=function(){var M=window.Mirs.Navigation.MdiList.getInstance();var I=window.Mirs.Navigation.MDIControl.getInstance();f="LayoutTile";var C=I.clientHeight;var x=I.clientWidth;var A=Math.floor(C/q);var y=Math.floor(x/c);var G=A*y;var a=M.getMdiList().length;var F=true;var z=Math.sqrt(a);if(parseInt(z)==z){A=z;y=z;G=z*z}if(G<a){F=false}else{var G=0;var g=0;var K=0;var J=Math.ceil(a/y);var E=C/J;var L=x/y;if(a<y){L=x/a}for(var H=0;H<M.getMdiList().length;H++){var D=M.getMdiList()[H];D.style.display="block";D.style.position="absolute";if(Math.floor(H/y)>g){K=0;g++}D.style.top=E*g+4+"px";D.style.left=L*K+(s-2)+"px";D.style.bottom="0px";D.style.right="3px";D.style.height=E-l+"px";D.style.width=L-s-3+"px";D.getTitleContainer().className="rwIfTitleContainer";D.getIfContainer().className="rwIfContainer";if(D.getIframeElement()!=null){D.getIframeElement().style.border="0"}G++;K++}F=true}var B=Mirs.Navigation.MDIControl.getInstance().getActiveMdiChild();B.getTitleContainer().className="rwIfTitleContainerSel";for(var H=0;H<M.getMdiList().length;H++){var D=M.getMdiList()[H];D.style.border="1px solid #bbbbbb"}return F};j.prototype.setLayoutHorizontal=function(){var D=window.Mirs.Navigation.MdiList.getInstance();var z=window.Mirs.Navigation.MDIControl.getInstance();f="LayoutTile";var x=z.clientHeight;var C=z.clientWidth;var y=Math.floor(x/q);var J=1;var E=y*J;var F=D.getMdiList().length;var g=true;if(E<F){g=false}else{var E=0;var a=0;var H=0;var I=Math.ceil(F/J);var L=x/I;var G=C/J;if(F<J){G=C/F}for(var B=0;B<D.getMdiList().length;B++){var A=D.getMdiList()[B];A.style.display="block";A.style.position="absolute";if(Math.floor(B/J)>a){H=0;a++}A.style.top=L*a+4+"px";A.style.left=G*H+s+"px";A.style.bottom="0px";A.style.right="0px";A.style.height=L-l+"px";A.style.width=G-2*s+"px";A.getTitleContainer().className="rwIfTitleContainer";A.getIfContainer().className="rwIfContainer";if(A.getIframeElement()!=null){A.getIframeElement().style.border="0"}E++;H++}g=true}var K=Mirs.Navigation.MDIControl.getInstance().getActiveMdiChild();K.getTitleContainer().className="rwIfTitleContainerSel";for(var B=0;B<D.getMdiList().length;B++){var A=D.getMdiList()[B];A.style.border="1px solid #bbbbbb"}return g};j.prototype.setLayoutVertical=function(){var D=window.Mirs.Navigation.MdiList.getInstance();var z=window.Mirs.Navigation.MDIControl.getInstance();f="LayoutTile";var x=z.clientHeight;var C=z.clientWidth;var y=1;var J=Math.floor(C/c);var E=y*J;var F=D.getMdiList().length;var g=true;if(E<F){g=false}else{var E=0;var a=0;var H=0;var I=Math.ceil(F/J);var L=x/1;var G=C/J;if(F<J){G=C/F}for(var B=0;B<D.getMdiList().length;B++){var A=D.getMdiList()[B];A.style.display="block";A.style.position="absolute";if(Math.floor(B/J)>a){H=0;a++}A.style.top=L*a+4+"px";A.style.left=G*H+s+"px";A.style.bottom="0px";A.style.right="0px";A.style.height=L-l+"px";A.style.width=G-s+"px";A.getTitleContainer().className="rwIfTitleContainer";A.getIfContainer().className="rwIfContainer";if(A.getIframeElement()!=null){A.getIframeElement().style.border="0"}E++;H++}g=true}var K=Mirs.Navigation.MDIControl.getInstance().getActiveMdiChild();K.getTitleContainer().className="rwIfTitleContainerSel";for(var B=0;B<D.getMdiList().length;B++){var A=D.getMdiList()[B];A.style.border="1px solid #bbbbbb"}return g};var o=window.Mirs.Navigation.MdiList=function(){this._masterElement=null;this._mdiList=new Array();this._selItem=null};var w=null;o.getInstance=function(){var a=null;if(w==null){a=new window.Mirs.Navigation.MdiList();w=a}else{a=w}return a};o.Create=function(){var g=t.ce("div");g.setAttribute("MirsElementType","Mirs.Navigation.MdiList");var a=new Mirs.Navigation.MdiList();a._masterElement=g;g.addItem=t.cd(a,a.addItem);g.getMdiList=t.cd(a,a.getMdiList);g.setMdiList=t.cd(a,a.setMdiList);g.setSelItem=t.cd(a,a.setSelItem);g.getSelItem=t.cd(a,a.getSelItem);w=g;return g};o.prototype.addItem=function(g){var a=this._mdiList;this._mdiList.push(g);return a};o.prototype.getMdiList=function(){return this._mdiList};o.prototype.setMdiList=function(a){this._mdiList=a;return this._mdiList};o.prototype.setSelItem=function(a){this._selItem=a;return this._selItem};o.prototype.getSelItem=function(){return this._selItem};o.prototype.removeMdiList=function(g){for(var a=0;a<this._mdiList.length;a++){}return this._mdiList};var h=window.Mirs.Navigation.MDILayoutControl=function(){this._masterElement=null};var r=null;h.getInstance=function(){var a=null;if(r==null){a=new window.Mirs.Navigation.MDILayoutControl();r=a}else{a=r}return a};h.Create=function(){var F=t.ce("div");F.setAttribute("MirsElementType","Mirs.Navigation.MDILayoutControl");var G=t.ce("div");G.className="LayoutContainerBgCover";var E=new window.Mirs.Navigation.MDILayoutControl();var I=t.cd(E,E.changeShow);G.addEventListener("click",I,false);F.appendChild(G);h.prototype.setMasterElement(u);F.style.display="none";F.className="LayoutManagerContainer";var g=t.ce("div");g.className="popLContainer";F.appendChild(g);var B=t.ce("div");B.className="popRContainer";F.appendChild(B);var a=t.ce("div");a.className="TopTitle";B.appendChild(a);var D=t.ce("div");D.className="backBtn";var E=new window.Mirs.Navigation.MDILayoutControl();E._masterElement=D;var I=t.cd(E,E.changeShow);D.addEventListener("click",I,false);newimg=t.ce("img");newimg.src="MirsImages/收回按钮.png";D.appendChild(newimg);a.appendChild(D);var y=t.ce("div");y.className="FirstTitle";y.innerText="窗口管理";a.appendChild(y);var z=t.ce("div");z.className="editorBtn";var A=new window.Mirs.Navigation.MDILayoutControl();A._masterElement=z;var x=t.cd(A,A.editorBtn_Click);z.addEventListener("click",x,false);z.style.display="none";newimg=t.ce("img");newimg.src="MirsImages/编辑.png";z.appendChild(newimg);a.appendChild(z);window.Mirs.Navigation.MDIMenuList.Create(B);var C=t.ce("div");C.className="SecondTitle";C.innerText="已打开功能";B.appendChild(C);var H=window.Mirs.Navigation.MDIFuncBar.Create();B.appendChild(H);F.changeShow=t.cd(E,E.changeShow);F.refshLayManager=t.cd(E,E.refshLayManager);F.refshLayout=t.cd(E,E.refshLayout);F.setMasterElement=t.cd(E,E.setMasterElement);F.getMasterElement=t.cd(E,E.getMasterElement);r=F;return F};h.prototype.refshLayManager=function(){var a=window.Mirs.Navigation.MDIFuncBar.getInstance();a.innerHTML="";var z=window.Mirs.Navigation.MdiList.getInstance();for(var y=0;y<z.getMdiList().length;y++){var x=z.getMdiList()[y];var g=z.getMdiList()[y].getModel();g._hmfuncid=x.id;a.addItem(g)}};h.prototype.refshLayout=function(){var A=window.Mirs.Navigation.LayoutContainer.getInstance();var y=A.getStatus();var x=true;switch(y){case"T":x=A.setLayoutTile();if(x){A.setStatus("T")}break;case"H":x=A.setLayoutHorizontal();if(x){A.setStatus("H")}break;case"V":x=A.setLayoutVertical();if(x){A.setStatus("V")}break;case"S":var z=window.Mirs.Navigation.MdiList.getInstance();for(var g=0;g<z.getMdiList().length;g++){var a=z.getMdiList()[g];if(g==0){a.className="rwIframeContainerShow";a.setAttribute("style","")}else{a.style.display="none"}a.getTitleContainer().className="rwIfTitleContainerNone";a.getIfContainer().className="rwIfContainer rwIfContainerTop0"}A.setStatus("S");break}var B=window.Mirs.Navigation.MDIControl.getInstance();B.setIsLayout(true)};h.prototype.setMasterElement=function(a){this._masterElement=a;return this._masterElement};h.prototype.getMasterElement=function(){return this._masterElement};h.prototype.changeShow=function(){var a=window.Mirs.Navigation.MDILayoutControl.getInstance();a.style.display=a.style.display=="none"?"block":"none"};h.prototype.editorBtn_Click=function(){alert("编辑编辑")};if(window.Mirs.Navigation.MDIMenuList){throw new Error("Mirs.Navigation.MDIMenuList 类重复加载")}var m=window.Mirs.Navigation.MDIMenuList=function(){this._masterElement=null};var p=new Array();p[0]="平铺窗口<img src='MirsImages/平铺窗口.png' />";p[1]="水平平铺<img src='MirsImages/水平平铺.png' />";p[2]="垂直平铺<img src='MirsImages/垂直平铺.png' />";p[3]="最大化<img src='MirsImages/Maximizing.png' />";m.Create=function(y){for(var x in p){var g="";if(p[x].indexOf("平铺窗口")>=0){g="T"}if(p[x].indexOf("水平平铺")>=0){g="H"}if(p[x].indexOf("垂直平铺")>=0){g="V"}if(p[x].indexOf("最大化")>=0){g="S"}var a=window.Mirs.Navigation.MDIMenuItem.Create(p[x],g);y.appendChild(a)}};if(window.Mirs.Navigation.MDIMenuItem){throw new Error("Mirs.Navigation.MDIMenuItem 类重复加载")}var e=window.Mirs.Navigation.MDIMenuItem=function(){this._masterElement=null;this._status=null};e.prototype.Menu_Click=function(){var y=window.Mirs.Navigation.LoadBodyEvent.getInstance();var a=document.documentElement.clientWidth;if((y._widStatus=="Normal")&&a<900){var z=window.Mirs.Navigation.WorkControl.getInstance();z.changeWindow()}var x=window.Mirs.Navigation.LayoutContainer.getInstance();x.setStatus(this._status);var g=window.Mirs.Navigation.MDILayoutControl.getInstance();g.refshLayout()};e.Create=function(z,x){var y=t.ce("div");y.setAttribute("MirsElementType","Mirs.Navigation.MDIMenuItem");y.className="OptionFun";y.innerHTML=z;var g=new window.Mirs.Navigation.MDIMenuItem();g._masterElement=y;g._status=x;var a=t.cd(g,g.Menu_Click);y.addEventListener("click",a,false);return y};if(window.Mirs.Navigation.MDIFuncBar){throw new Error("Mirs.Navigation.MDIFuncBar 类重复加载")}var d=window.Mirs.Navigation.MDIFuncBar=function(){this._masterElement=null};var n=null;d.getInstance=function(){var a=null;if(n==null){a=new window.Mirs.Navigation.MDIFuncBar();n=a}else{a=n}return a};d.Create=function(){var a=t.ce("div");a.setAttribute("MirsElementType","Mirs.Navigation.MDIFuncBar");a.className="optionContainer";var g=new window.Mirs.Navigation.MDIFuncBar();g._masterElement=a;a.addItem=t.cd(g,g.addItem);n=a;return a};d.prototype.addItem=function(a){var g=window.Mirs.Navigation.MDIFuncItem.Create(a);this._masterElement.appendChild(g);return g};if(window.Mirs.Navigation.MDIFuncItem){throw new Error("Mirs.Navigation.MDIFuncItem 类重复加载")}var i=window.Mirs.Navigation.MDIFuncItem=function(){this._masterElement=null;this._titleElement=null;this._closeElement=null;this._model=null};i.prototype.opTitle_Click=function(){var A=window.Mirs.Navigation.MdiList.getInstance();for(var x=0;x<A.getMdiList().length;x++){var g=A.getMdiList()[x];if(g.id==this._model._hmfuncid){g.screening();break}else{g.style.display="none"}}var a=document.documentElement.clientWidth;var z=window.Mirs.Navigation.LoadBodyEvent.getInstance();if((z._widStatus=="Normal")&&a<900){var B=window.Mirs.Navigation.WorkControl.getInstance();B.changeWindow()}var y=window.Mirs.Navigation.WinManagerBar.getInstance();y.CreateItems()};i.prototype.close_Click=function(){var B=true;if(B==true){var A=window.Mirs.Navigation.MdiList.getInstance();for(var y=0;y<A.getMdiList().length;y++){var x=A.getMdiList()[y];if(x.id==this._model._hmfuncid){x.closeing();break}}}else{return}var g=window.Mirs.Navigation.MDILayoutControl.getInstance();g.refshLayManager();var a=window.Mirs.Navigation.MDILayoutControl.getInstance();a.refshLayout();var z=window.Mirs.Navigation.WinManagerBar.getInstance();z.CreateItems()};i.Create=function(g){var x=t.ce("div");x.setAttribute("MirsElementType","Mirs.Navigation.MDIFuncItem");x.className="option";var C=t.ce("div");C.className="opTitle";C.innerText=g._Caption;var y=new window.Mirs.Navigation.MDIFuncItem();y._masterElement=x;y._titleElement=C;y._model=g;var B=t.cd(y,y.opTitle_Click);C.addEventListener("click",B,false);x.appendChild(C);var A=t.ce("div");A.className="opclose";y._closeElement=A;var z=t.cd(y,y.close_Click);A.addEventListener("click",z,false);var a=t.ce("img");a.src="MirsImages/close.png";A.appendChild(a);x.appendChild(A);return x}}(Mirs.Global,Mirs.Application);