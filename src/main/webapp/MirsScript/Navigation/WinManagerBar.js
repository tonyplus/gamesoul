!function(){window.Mirs=window.Mirs||{};window.Mirs.WinManagerBar=window.Mirs.WinManagerBar||{};if(window.Mirs.WinManagerBar.Helper){throw new Error("Mirs.WinManagerBar.Helper 类重复加载")}var b=window.Mirs.WinManagerBar.Helper=function(){this._masterElement=null};var a=null;b.getInstance=function(){var c=null;if(a==null){c=new window.Mirs.WinManagerBar.Helper();a=c}else{c=a}return c};b.addHandler=function(d,c,e){if(d.addEventListener){d.addEventListener(c,e,false)}else{if(d.attachEvent){d.attachEvent("on"+c,e)}}};b.ah=b.addHandler;b.createElement=function(c){var d=document.createElement(c);return d};b.ce=b.createElement;b.createDelegate=function(c,d){return function(){return d.apply(c,arguments)}};b.dbing=b.createDelegate;b.createHttpRequest=function(){var c=null;if(window.XMLHttpRequest){c=new XMLHttpRequest()}else{if(window.ActiveXObject){c=new ActiveXObject("Microsoft.XMLHTTP")}}return c};b.EventBubbling=function(c){var d=(c)?c:window.event;if(window.event){d.cancelBubble=true}else{d.stopPropagation()}};b.eb=b.EventBubbling}();!function(b){window.Mirs=window.Mirs||{};window.Mirs.Navigation=window.Mirs.Navigation||{};if(window.Mirs.Navigation.WinManagerBar){throw new Error("Mirs.Navigation.WinManagerBar 类重复加载")}var l=window.Mirs.Navigation.WinManagerBar=function(){this._masterElement=null;this._MinVisibleWidth=900};var a=null;l.getInstance=function(){var m=null;if(a==null){m=new window.Mirs.Navigation.WinManagerBar();a=m}else{m=a}return m};var c=0;l.Create=function(){var p=b.ce("div");p.className="wmbRootContainer";var s=window.Mirs.Navigation.WinManagerBar.RollBar.Create();p.appendChild(s);var q=window.Mirs.Navigation.WinManagerBar.FuncBar.Create();p.appendChild(q);var m=window.Mirs.Navigation.WinManagerBar.getInstance();m._masterElement=p;var r=window.Mirs.Application.getInstance();var o=r.getWorkControl().getMdiControl();o.addControlAddEvent(function(){var t=window.Mirs.Navigation.WinManagerBar.getInstance();t.CreateItems()});o.removeControlAddEvent(function(){var t=window.Mirs.Navigation.WinManagerBar.getInstance();t.CreateItems()});return p};l.prototype.setMinVisibleWidth=function(m){this._MinVisibleWidth=m;var o=window.Mirs.Application.getInstance();if(o.Config.WinManagerBarSwitch==true){g()}};l.prototype.getMinVisibleWidth=function(){return this._MinVisibleWidth};l.prototype.startUp=function(){var r=window.Mirs.Navigation.WorkControl.getInstance();var q=window.Mirs.Navigation.WinManagerBar.Create();r.appendChild(q);g();if(window.addEventListener){window.addEventListener("resize",g)}else{if(window.attachEvent){window.attachEvent("onresize",g)}}var o=Mirs.Navigation.MDIControl.getInstance();var m=window.Mirs.Navigation.WinManagerBar.RollBar.Items.getInstance();var p=b.dbing(m,m.HighlightItem);o.addActiveMdiChildEvent(p)};var g=function(){var m=window.Mirs.Navigation.WinManagerBar.getInstance();var s=window.Mirs.Navigation.WinManagerBar.RollBar.getInstance();s._RoolBar.innerHTML="";c=0;s._RoolBar.style.left="0px";m.CreateItems();var r=window.Mirs.Application.getInstance();var o=r.getWorkControl().getMdiControl();var q=m.getMinVisibleWidth();var p=window.Mirs.Navigation.MdiList.getInstance().getMdiList();if(document.body.clientWidth<q){m._masterElement.style.display="none";o.style.bottom="0px"}else{if(p.length==0){m._masterElement.style.display="none";o.style.bottom="0px"}else{m._masterElement.style.display="block";o.style.bottom="36px"}}};l.prototype.CreateItems=function(){var p=window.Mirs.Application.getInstance();if(p.Config.WinManagerBarSwitch==true){var y=window.Mirs.Navigation.WinManagerBar.RollBar.getInstance();y._RoolBar.innerHTML="";var w=window.Mirs.Navigation.WinManagerBar.RollBar.Items.getInstance();var t=window.Mirs.Navigation.MdiList.getInstance().getMdiList();var p=window.Mirs.Application.getInstance();var o=p.getWorkControl().getMdiControl();var u=window.Mirs.Navigation.WinManagerBar.getInstance();var x=u.getMinVisibleWidth();if(document.body.clientWidth<x){u._masterElement.style.display="none";o.style.bottom="0px"}else{if(t.length==0){this._masterElement.style.display="none";o.style.bottom="0px"}else{o.style.bottom="36px";this._masterElement.style.display="block";var z=w.getFocusEle();var r=y._RoolMainBar.clientWidth;for(var s=0;s<t.length;s++){var q=t[s];var v=t[s].getModel();v._hmfuncid=q.id;if(q==z){v._SelectState=true}else{v._SelectState=false}y.AddRoolBarItem(v)}if(r>t.length*135+1){y._NextBtn.className="wmbFuncBtn_Next wmbFuncBtn_Next_A wmbFuncBtn";y._PrevBtn.className="wmbFuncBtn_Prev wmbFuncBtn_Prev_A wmbFuncBtn"}else{y._NextBtn.className="wmbFuncBtn_Next wmbFuncBtn_Next_B wmbFuncBtn"}y._RoolBar.style.width=(t.length*135+1)+"px";var m=b.ce("div");m.className="wmbSplitLine";y._RoolBar.appendChild(m)}}}};if(window.Mirs.Navigation.WinManagerBar.RollBar){throw new Error("Mirs.Navigation.WinManagerBar.RollBar 类重复加载")}var i=window.Mirs.Navigation.WinManagerBar.RollBar=function(){this._masterElement=null;this._PrevBtn=null;this._NextBtn=null;this._RoolMainBar=null;this._RoolBar=null;this._LastLine=null};var n=null;i.getInstance=function(){var m=null;if(n==null){m=new window.Mirs.Navigation.WinManagerBar.RollBar();n=m}else{m=n}return m};i.Create=function(){var q=window.Mirs.Navigation.WinManagerBar.RollBar.getInstance();var r=b.ce("div");r.className="wmbFuncBar";var s=b.ce("div");s.className="wmbFuncBtn_Prev wmbFuncBtn_Prev_A wmbFuncBtn";var o=b.dbing(q,q.Prev_Ck);b.ah(s,"click",o);r.appendChild(s);q._PrevBtn=s;var t=b.ce("div");t.className="wmbFuncMainBar";r.appendChild(t);q._RoolMainBar=t;var u=b.ce("div");u.className="wmbRoolBar";t.appendChild(u);q._RoolBar=u;var m=b.ce("div");m.className="wmbSplitLine";u.appendChild(m);q._LastLine=m;var v=b.ce("div");v.className="wmbFuncBtn_Next wmbFuncBtn_Next_A wmbFuncBtn";var p=b.dbing(q,q.Next_Ck);b.ah(v,"click",p);r.appendChild(v);q._NextBtn=v;return r};i.prototype.AddRoolBarItem=function(m){var o=window.Mirs.Navigation.WinManagerBar.RollBar.Items.Create(m);return o};i.prototype.Prev_Ck=function(){if(c<=0){if(c<=0){this._PrevBtn.className="wmbFuncBtn_Prev wmbFuncBtn_Prev_A wmbFuncBtn"}}else{c-=135;this._RoolBar.style.left=-c+"px";this._NextBtn.className="wmbFuncBtn_Next wmbFuncBtn_Next_B wmbFuncBtn"}if(c<=0){this._PrevBtn.className="wmbFuncBtn_Prev wmbFuncBtn_Prev_A wmbFuncBtn"}var m=window.Mirs.Navigation.WinManagerBar.RollBar.getInstance();if(m._RoolMainBar.clientWidth>m._RoolBar.clientWidth){this._NextBtn.className="wmbFuncBtn_Next wmbFuncBtn_Next_A wmbFuncBtn"}};i.prototype.Next_Ck=function(){var m=window.Mirs.Navigation.WinManagerBar.RollBar.getInstance();if(m._RoolMainBar.clientWidth>m._RoolBar.clientWidth){this._NextBtn.className="wmbFuncBtn_Next wmbFuncBtn_Next_A wmbFuncBtn"}else{if(c<(m._RoolBar.scrollWidth-136*2)){c+=135;this._RoolBar.style.left=-c+"px";this._PrevBtn.className="wmbFuncBtn_Prev wmbFuncBtn_Prev_B wmbFuncBtn";if(c>=(m._RoolBar.scrollWidth-136*2)){m._NextBtn.className="wmbFuncBtn_Next wmbFuncBtn_Next_A wmbFuncBtn"}}else{}}};if(window.Mirs.Navigation.WinManagerBar.RollBar.Items){throw new Error("Mirs.Navigation.WinManagerBar.RollBar.Items 类重复加载")}var k=window.Mirs.Navigation.WinManagerBar.RollBar.Items=function(){this._masterElement=null;this._SelectItem=null;this._FuncOption=null;this._FocusEle=null};var j=null;k.getInstance=function(){var m=null;if(j==null){m=new window.Mirs.Navigation.WinManagerBar.RollBar.Items();j=m}else{m=j}return m};k.Create=function(r){var t=new window.Mirs.Navigation.WinManagerBar.RollBar.Items();var u=b.ce("div");u.className="wmbFuncItem";var q=b.ce("div");if(r._SelectState==true){q.className="wmbFuncOption_Select"}else{q.className="wmbFuncOption"}u._wmbFuncItemBar=q;t._FuncOption=q;u.appendChild(q);var o=b.ce("div");o.className="wmbFuncTitleBar";o.innerHTML=r._Caption;o.title=r._Caption;t._model=r;o._FuncOption=q;q.appendChild(o);var s=b.dbing(t,t.ItemTitleBar_Ck);b.ah(o,"click",s);var v=b.ce("div");if(r._SelectState==true){v.className="wmbFuncCloseBtn_B wmbFuncCloseBtn"}else{v.className="wmbFuncCloseBtn_A wmbFuncCloseBtn"}v._model=r;q.appendChild(v);var m=b.dbing(t,t.ItemClose_Ck);b.ah(v,"click",m);var p=window.Mirs.Navigation.WinManagerBar.RollBar.getInstance();p._RoolBar.appendChild(u);return u};k.prototype.ItemTitleBar_Ck=function(){this.ChangeSelect();var p=window.Mirs.Navigation.MdiList.getInstance().getMdiList();for(var o=0;o<p.length;o++){var m=p[o];if(m.id==this._model._hmfuncid){var q=window.Mirs.Navigation.MDIControl.getInstance();m.screening();break}else{m.style.display="none"}}};k.prototype.ItemClose_Ck=function(){var s=true;if(s==true){var q=window.Mirs.Navigation.MdiList.getInstance();for(var o=0;o<q.getMdiList().length;o++){var m=q.getMdiList()[o];if(m.id==this._model._hmfuncid){m.closeing();break}}}else{return}var p=window.Mirs.Navigation.WinManagerBar.getInstance();p.CreateItems()};k.prototype.ChangeSelect=function(){var m=window.Mirs.Navigation.WinManagerBar.RollBar.Items.getInstance();if(m._SelectItem){m._SelectItem.className="wmbFuncOption"}this._FuncOption.className="wmbFuncOption_Select";m._SelectItem=this._FuncOption};k.prototype.HighlightItem=function(m){this.setFocusEle(m)};k.prototype.setFocusEle=function(m){var o=window.Mirs.Navigation.WinManagerBar.RollBar.Items.getInstance();this._FocusEle=m};k.prototype.getFocusEle=function(){return this._FocusEle};if(window.Mirs.Navigation.WinManagerBar.FuncBar){throw new Error("Mirs.Navigation.WinManagerBar.FuncBar 类重复加载")}var e=window.Mirs.Navigation.WinManagerBar.FuncBar=function(){this._masterElement=null};var d=null;e.getInstance=function(){var m=null;if(d==null){m=new window.Mirs.Navigation.WinManagerBar.FuncBar();d=m}else{m=d}return m};e.Create=function(){var t=window.Mirs.Navigation.WinManagerBar.FuncBar.Item;var s=b.ce("div");s.className="wmbContralBar";var r=b.ce("div");r.className="wmbContralBtnBar";s.appendChild(r);var p=t.Create("平铺窗口","wmbContralBtn wmbPingPu","T");r.appendChild(p);var m=t.Create("水平平铺","wmbContralBtn wmbShuiPing","H");r.appendChild(m);var o=t.Create("垂直平铺","wmbContralBtn wmbChuiZhi","V");r.appendChild(o);var q=t.Create("最大化","wmbContralBtn wmbZuiDa","S");r.appendChild(q);return s};if(window.Mirs.Navigation.WinManagerBar.FuncBar.Item){throw new Error("Mirs.Navigation.WinManagerBar.FuncBar.Item 类重复加载")}var f=window.Mirs.Navigation.WinManagerBar.FuncBar.Item=function(){this._masterElement=null;this._status=null};var h=null;f.getInstance=function(){var m=null;if(h==null){m=new window.Mirs.Navigation.WinManagerBar.FuncBar.Item();h=m}else{m=h}return m};f.Create=function(s,q,m){var r=b.ce("div");r.setAttribute("MirsElementType","Mirs.Navigation.MDIMenuItem");r.className=q;r.title=s;r._status=m;var p=new window.Mirs.Navigation.WinManagerBar.FuncBar.Item();p._masterElement=r;p._status=m;var o=b.dbing(p,p.Item_Ck);b.ah(r,"click",o);return r};f.prototype.Item_Ck=function(){var q=window.Mirs.Navigation.LoadBodyEvent.getInstance();var m=document.documentElement.clientWidth;if((q._widStatus=="Normal")&&m<900){var r=window.Mirs.Navigation.WorkControl.getInstance();r.changeWindow()}var p=window.Mirs.Navigation.LayoutContainer.getInstance();p.setStatus(this._status);var o=window.Mirs.Navigation.MDILayoutControl.getInstance();o.refshLayout()}}(window.Mirs.WinManagerBar.Helper);