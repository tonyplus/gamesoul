!function(a){window.Navigation=window.Navigation||{};if(window.Navigation.NavPanelControl){throw new Error("Navigation.NavPanelControl 类重复加载")}var b=window.Navigation.NavPanelControl=function(){this._masterElement=null;this._panelList=new Array();this._activePanelList=new Array();this._activeClientPanel=null};var c=null;b.getInstance=function(){var d=null;if(c==null){d=new window.Navigation.NavPanelControl();c=d}else{d=c}return d};b.prototype.Create=function(){var d=a.ce("div");d.setAttribute("MirsElementType","Navigation.NavPanelControl");d.className="npcNavPanelContainer";this._masterElement=d;return d};b.prototype.createClientPanel=function(){var d=new window.Navigation.ClientPanel();return d};b.prototype.addClientPanel=function(d){if(!d){console.log("创建的自定义面板（CustomEle）不存在.");return}this._masterElement.appendChild(d);this._panelList.push(d)};b.prototype.getClientPanels=function(){return this._panelList};b.prototype.judge=function(){if(this._panelList.length==0){this._masterElement.style.display="none"}else{for(var d=0;d<this._panelList.length;d++){if(this._panelList[d].state=="active"){this._masterElement.style.display="block";return}}this._masterElement.style.display="none"}};b.prototype.setActiveClientPanel=function(d){this._activeClientPanel=d};b.prototype.getActiveClientPanel=function(){return this._activeClientPanel}}(window.Mirs.Global);!function(b){window.Navigation=window.Navigation||{};if(window.Navigation.ClientPanel){throw new Error("Navigation.ClientPanel 类重复加载")}var a=window.Navigation.ClientPanel=function(){this._masterElement=null;this._CurrentEle=null;this._refreshTheme=null};var c=null;a.getInstance=function(){var d=null;if(c==null){d=new window.Navigation.ClientPanel();c=d}else{d=c}return d};a.prototype.Create=function(){var f=b.ce("div");f.setAttribute("MirsElementType","Navigation.ClientPanel");f.className="npcClientPanelContainer";f.state="hide";var e=b.cd(this,this.setCurrentEle);f.setCurrentEle=e;var d=b.cd(this,this.getCurrentEle);f.getCurrentEle=d;var k=b.cd(this,this.Active);f.Active=k;var i=b.cd(this,this.Hide);f.Hide=i;var h=b.cd(this,this.Destroy);f.Destroy=h;var g=b.cd(this,this.refreshTheme);f.refreshTheme=g;var j=b.cd(this,this.setRefreshTheme);f.setRefreshTheme=j;this._masterElement=f;return f};a.prototype.setRefreshTheme=function(d){this._refreshTheme=d};a.prototype.setCurrentEle=function(d){this._CurrentEle=d;this._masterElement.innerHTML="";this._masterElement.appendChild(d)};a.prototype.getCurrentEle=function(){return this._CurrentEle};a.prototype.Active=function(){var j=window.Navigation.NavPanelControl.getInstance();var h=j.getClientPanels();var e=j._activePanelList;var d=0;for(var f=0;f<h.length;f++){if(h[f]!=this._masterElement){d++}}if(d==h.length){j._masterElement.appendChild(this._masterElement);j._panelList.push(this._masterElement)}var g=e.concat();for(var f=0;f<g.length;f++){if(g[f]!=this._masterElement){g[f].style.display="none"}else{e.splice(f,1)}}this._masterElement.style.display="block";this._masterElement.state="active";j._activePanelList.push(this._masterElement);j.setActiveClientPanel(this._masterElement);console.log(j._activePanelList);console.log(this._masterElement.id+"ClientPanel Active！");j.judge()};a.prototype.Hide=function(){var f=window.Navigation.NavPanelControl.getInstance();var d=f._activePanelList;this._masterElement.style.display="none";this._masterElement.state="hide";for(var e=0;e<d.length;e++){if(d[e]==this._masterElement){d.splice(e,1)}}if(d[d.length-1]){d[d.length-1].style.display="block"}console.log(f._activePanelList);console.log(this._masterElement.id+"ClientPanel Hide！");f.judge()};a.prototype.Destroy=function(){var g=window.Navigation.NavPanelControl.getInstance();var f=g.getClientPanels();var d=g._activePanelList;this._masterElement.parentNode.removeChild(this._masterElement);for(var e=0;e<f.length;e++){if(f[e]==this._masterElement){f.splice(e,1)}}for(var e=0;e<d.length;e++){if(d[e]==this._masterElement){d.splice(e,1)}}if(d[d.length-1]){d[d.length-1].style.display="block"}console.log(this._masterElement.id+"ClientPanel Destroy！");g.judge()};a.prototype.refreshTheme=function(d){if(this._refreshTheme!=null){this._refreshTheme(d)}}}(window.Mirs.Global);